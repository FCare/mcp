{
  "id": "chat_tts_websocket",
  "name": "Pipeline Chat TTS WebSocket", 
  "description": "Pipeline de chat avec streaming texte ET génération audio via TTS",
  "version": "1.0.0",
  "step_instances": [
    {
      "instance_id": "system_prompt",
      "step_definition": "System Prompt Step",
      "config_overrides": {
        "prompt_template": "Tu es un assistant virtuel intelligent et utile. Tu réponds de manière concise et claire."
      }
    },
    {
      "instance_id": "websocket_server",
      "step_definition": "websocket_server",
      "config_overrides": {
        "port": 8769,
        "mode": "text_to_text"
      }
    },
    {
      "instance_id": "openai_chat",
      "step_definition": "OpenAI Chat Step",
      "config_overrides": {}
    },
    {
      "instance_id": "duplicator",
      "step_definition": "Duplicator Step",
      "config_overrides": {}
    },
    {
      "instance_id": "sentence_normalizer",
      "step_definition": "Sentence Normalizer Step",
      "config_overrides": {
        "language_id": "fr"
      }
    },
    {
      "instance_id": "tts_step",
      "step_definition": "chatterbox_tts",
      "config_overrides": {}
    }
  ],
  "connections": [
    {
      "from": "system_prompt",
      "to": "openai_chat"
    },
    {
      "from": "websocket_server",
      "to": "openai_chat"
    },
    {
      "from": "openai_chat",
      "to": "duplicator"
    },
    {
      "from": "duplicator",
      "to": ["websocket_server", "sentence_normalizer"]
    },
    {
      "from": "sentence_normalizer",
      "to": "tts_step"
    },
    {
      "from": "tts_step",
      "to": "websocket_server"
    }
  ]
}