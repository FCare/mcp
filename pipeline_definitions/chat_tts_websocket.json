{
  "id": "chat_tts_websocket",
  "name": "Pipeline Chat TTS WebSocket",
  "description": "Pipeline de chat avec streaming texte ET génération audio via TTS",
  "version": "1.0.0",
  "step_instances": [
    {
      "instance_id": "system_prompt",
      "step_definition": "System Prompt Step",
      "config_overrides": {
        "prompt_template": "Tu es un assistant virtuel intelligent utilisant Qwen3 VL 8B Instruct. Tu réponds de manière concise et claire en français."
      }
    },
    {
      "instance_id": "websocket_server",
      "step_definition": "websocket_server",
      "config_overrides": {
        "port": 8769,
        "mode": "audio_text_to_text_audio",
        "audio_format": "pcm16",
        "sample_rate": 24000
      }
    },
    {
      "instance_id": "asr_step",
      "step_definition": "Kyutai ASR Step",
      "config_overrides": {}
    },
    {
      "instance_id": "asr_duplicator",
      "step_definition": "Duplicator Step",
      "config_overrides": {}
    },
    {
      "instance_id": "openai_chat",
      "step_definition": "OpenAI Chat Step",
      "config_overrides": {}
    },
    {
      "instance_id": "duplicator",
      "step_definition": "Duplicator Step",
      "config_overrides": {}
    },
    {
      "instance_id": "sentence_normalizer",
      "step_definition": "Sentence Normalizer Step",
      "config_overrides": {
        "language_id": "fr"
      }
    },
    {
      "instance_id": "tts_step",
      "step_definition": "chatterbox_tts",
      "config_overrides": {}
    }
  ],
  "connections": [
    {
      "from": "system_prompt",
      "to": "openai_chat"
    },
    {
      "from": "websocket_server",
      "to": "asr_step"
    },
    {
      "from": "asr_step",
      "to": "asr_duplicator"
    },
    {
      "from": "asr_duplicator",
      "to": ["websocket_server", "openai_chat"]
    },
    {
      "from": "openai_chat",
      "to": "duplicator"
    },
    {
      "from": "duplicator",
      "to": ["websocket_server", "sentence_normalizer", "tts_step"]
    },
    {
      "from": "sentence_normalizer",
      "to": "tts_step"
    },
    {
      "from": "tts_step",
      "to": "websocket_server"
    }
  ]
}