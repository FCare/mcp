{
    "id": "Pipeline Chat WebSocket",
    "name": "Pipeline Chat WebSocket",
    "description": "Pipeline de chat conversationnel avec WebSocket et OpenAI",
    "capabilities": {
        "modalities": {
            "input": ["text", "image"],
            "output": ["text"],
            "processing": ["conversation", "llm", "vision", "function_calling"]
        },
        "features": ["streaming", "conversational", "stateful", "vision", "tools"],
        "models": ["qwen3-vl-8b-instruct"]
    },
    "step_instances": [
        {
            "instance_id": "websocket_server",
            "step_definition": "websocket_server",
            "config_overrides": {
                "host": "0.0.0.0",
                "port": 8768,
                "mode": "text_to_text"
            }
        },
        {
            "instance_id": "tool_registry",
            "step_definition": "Tool Registry Step",
            "config_overrides": {
                "expected_tools": ["weather_tool"],
                "registration_timeout": 5.0,
                "llm_step_name": "openai_chat"
            }
        },
        {
            "instance_id": "weather_tool",
            "step_definition": "Weather Tool Step",
            "config_overrides": {
                "user_permissions": {
                    "allowed_users": [],
                    "denied_users": []
                }
            }
        },
        {
            "instance_id": "openai_chat",
            "step_definition": "OpenAI Chat Step",
            "config_overrides": {
                "max_tokens": 1500,
                "system_prompt": "Tu es un assistant virtuel intelligent utilisant Qwen3 VL 8B. Tu réponds de manière claire, concise et engageante en français."
            }
        },
        {
            "instance_id": "tool_registry_duplicator",
            "step_definition": "Duplicator Step",
            "config_overrides": {}
        }
    ],
    "connections": [
        {
            "from": "websocket_server",
            "to": "tool_registry"
        },
        {
            "from": "tool_registry",
            "to": "tool_registry_duplicator"
        },
        {
            "from": "tool_registry_duplicator",
            "to": ["weather_tool", "openai_chat"]
        },
        {
            "from": "weather_tool",
            "to": "tool_registry"
        },
        {
            "from": "websocket_server",
            "to": "openai_chat"
        },
        {
            "from": "openai_chat",
            "to": "weather_tool"
        },
        {
            "from": "openai_chat",
            "to": "websocket_server"
        }
    ]
}